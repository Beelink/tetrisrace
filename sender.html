<!DOCTYPE html>
<html> 
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8">
		<title>Sender</title>
		<script src="/socket.io/socket.io.js"></script>
		<script type="text/javascript" charset="utf-8">

			var socket = io.connect('http://localhost:8080/');
			
			// window.addEventListener("load", ready); 

			// function ready(){ 
			// 	if(window.File && window.FileReader){ 
			// 		document.getElementById('uploadbutton').addEventListener('click', startUpload);  
			// 		document.getElementById('filebox').addEventListener('change', fileChosen);
			// 	} else {
			// 		document.getElementById('uploadarea').innerHTML = "Ваш браузер не поддерживает File API";
			// 	}
			// }

			// var selectedFile;
			// function fileChosen(evnt) {
		    //     selectedFile = evnt.target.files[0];
		    // }
		
			// var FReader;
			function sendMessage(sendedMessage) {
				// if(document.getElementById('filebox').value != "") {
				// 	FReader = new FileReader();
				// 	var content = 	'<span id="NameArea">Отправка ' + selectedFile.name + '</span>\
				// 					<div id="progressContainer"><div id="progressBar"></div></div><span id="percent">50%</span>\
				// 					<span id="Uploaded"> - <span id="MB">0</span>/' + Math.round(selectedFile.size / 1048576) + 'MB</span>';

				// 	document.getElementById('uploadarea').innerHTML = content;
				// 	FReader.onload = function(evnt){
						socket.emit('Send', { 'Name' : sendedMessage });
					// }
					// socket.emit('Start', { 'Name' : selectedFile.name, 'Size' : selectedFile.size });
				// } else {
				// 	alert("Выберите файл");
				// }
			}
			
			// socket.on('MoreData', function (data){
			// 	updateBar(data['Percent']);
			// 	var place = data['Place'] * 524288;
			// 	var newFile;
			// 	if(selectedFile.slice) 
			// 		newFile = selectedFile.slice(place, place + Math.min(524288, (selectedFile.size-place)));
			// 	else
			// 		newFile = selectedFile.mozSlice(place, place + Math.min(524288, (selectedFile.size-place)));
			// 	FReader.readAsBinaryString(newFile);
			// });


			// function updateBar(percent){
			// 	document.getElementById('progressBar').style.width = percent + '%';
			// 	document.getElementById('percent').innerHTML = (Math.round(percent*100)/100) + '%';
			// 	var MBDone = Math.round(((percent/100.0) * selectedFile.size) / 1048576);
			// 	document.getElementById('MB').innerHTML = MBDone;
			// }
			
			socket.on('Done', function (data) {
				console.log('sended');
				// var content = 	"Данные успешно загружены. Проверьте окно получателя.\
				// 				<button	type='button' name='upload' value='' id='restart' class='btn'>Отправить еще</button>";
				// document.getElementById('uploadarea').innerHTML = content;
				// document.getElementById('restart').addEventListener('click', refresh);
				// document.getElementById('uploadbox').style.width = '270px';
				// document.getElementById('uploadbox').style.height = '270px';
				// document.getElementById('uploadbox').style.textAlign = 'center';
				// document.getElementById('restart').style.left = '20px';
			});

			// function refresh(){
			// 	location.reload(true);
			// }
			
			
			
		</script>
<style type="text/css" media="screen">

	#main-container {
		position: relative;
	}

	button {
		position: absolute;
		width: 25%;
		height: 25%;
		margin: 16px;
	}

	#left-btn {
		left: 0;
		top: 35%;
	}

	#right-btn {
		right: 0;
		top: 35%;
	}

	#up-btn {
		top: 0;
		left: 37.5%;
	}

	#down-btn {
		bottom: 0;
		left: 37.5%;
	}

	#menu-btn {
		left: 37.5%;
		top: 35%;
	}

</style>
	</head>
	<body> 
		<!-- <div id='uploadbox'>
			<h2>Отправить файл:</h2>
			<span id='uploadarea'>
				<label for="filebox">Выберите файл: </label><input type="file" id="filebox"><br>
				<button	type='button' id='uploadbutton' class='btn'>Отправить</button>
			</span>
		</div> -->
		<center class="main-container">
			<button id="left-btn" onclick="sendMessage('left')">Left</button>
			<button id="right-btn" onclick="sendMessage('right')">Right</button>
			<button id="up-btn" onclick="sendMessage('up')">Up</button>
			<button id="down-btn" onclick="sendMessage('down')">Down</button>
			<button id="menu-btn" onclick="sendMessage('menu')">Menu</button>
		</center>
	</body>
</html>
