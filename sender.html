<!DOCTYPE html>
<html> 
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8">
		<title>Sender</title>
		<script src="/socket.io/socket.io.js"></script>
		<script type="text/javascript" charset="utf-8">
			var socket = io.connect('http://localhost:8080/');

			socket.on('send-message', function (data) {
                switch(data['message']) {
                case "back-complexity": changeComplexityButton(data['value']);
                    break;
                }
			});
			
			function changeComplexityButton(bool) {
				if(bool) {
					document.getElementById('complexity-btn').innerHTML = "💚";
				} else {
					document.getElementById('complexity-btn').innerHTML = "😡";
				}
			}

			function sendMessage(sendedMessage) {
				socket.emit('request-message', { message: sendedMessage });
			}

			function checkKey(e) {
				e = e || window.event;

				if (e.keyCode == '38') {
					sendMessage('up');
				} else if (e.keyCode == '40') {
					sendMessage('down');
				} else if (e.keyCode == '37') {
					sendMessage('left');
				} else if (e.keyCode == '39') {
					sendMessage('right');
				} else if (e.keyCode == '13') {
					sendMessage('restart');
				} else if (e.keyCode == '32') {
					sendMessage('complexity');
				}
			}

			document.onkeydown = checkKey;
		</script>
		<style type="text/css" media="screen">
			* {
				user-select: none;
				font-family: Helvetica;
			}

			body, .container {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100vh;
				margin: 0;
				padding: 0;
				background-color: lightgray;
			}

			.container {
				display: flex;
				flex-direction: column;
			}

			.row {
				flex: 5;
				display: flex;
				flex-direction: row;
			}

			.square {
				flex: 4;
				display: flex;
				text-align: center;
				justify-content: center;
				flex-flow: column wrap;
				margin: 16px;
				border: 6px solid black;
				background-color: white;
				border-radius: 32px;
				font-size: 5vw;
			}

			.square:hover {
				opacity: 0.75;
			}

			.square:active {
				opacity: 0.5;
			}

			.square.disabled {
				opacity: 0;
			}

			/* header, footer {
				height: 50px;
				width: 100%;
				font-size: 32px;
				text-align: center;
			} */
		</style>
	</head>
	<body> 
		<div class="container">
			<!-- <header>This is the header</header> -->
			<div class="row">
				<div class="square disabled">1x1</div>
				<div class="square" onclick="sendMessage('up')">👆</div>
				<div class="square" id="complexity-btn" onclick="sendMessage('complexity')">💚</div>
			</div>
			<div class="row">
				<div class="square" onclick="sendMessage('left')">👈</div>
				<div class="square" onclick="sendMessage('restart')">🔁</div>
				<div class="square" onclick="sendMessage('right')">👉</div>
			</div>
			<div class="row">
				<div class="square disabled">3x1</div>
				<div class="square" onclick="sendMessage('down')">👇</div>
				<div class="square disabled">3x3</div>
			</div>
			<!-- <footer>This is the footer</footer> -->
		</div>
	</body>
</html>
